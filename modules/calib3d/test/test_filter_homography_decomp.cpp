/*M///////////////////////////////////////////////////////////////////////////////////////
//
//  IMPORTANT: READ BEFORE DOWNLOADING, COPYING, INSTALLING OR USING.
//
//  By downloading, copying, installing or using the software you agree to this license.
//  If you do not agree to this license, do not download, install,
//  copy or use the software.
//
//
//                           License Agreement
//                For Open Source Computer Vision Library
//
// Copyright (C) 2016, OpenCV Foundation, all rights reserved.
//
// Third party copyrights are property of their respective owners.
//
// Redistribution and use in source and binary forms, with or without modification,
// are permitted provided that the following conditions are met:
//
//   * Redistribution's of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//
//   * Redistribution's in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//
//   * The name of the copyright holders may not be used to endorse or promote products
//     derived from this software without specific prior written permission.
//
// This software is provided by the copyright holders and contributors "as is" and
// any express or implied warranties, including, but not limited to, the implied
// warranties of merchantability and fitness for a particular purpose are disclaimed.
// In no event shall the Intel Corporation or contributors be liable for any direct,
// indirect, incidental, special, exemplary, or consequential damages
// (including, but not limited to, procurement of substitute goods or services;
// loss of use, data, or profits; or business interruption) however caused
// and on any theory of liability, whether in contract, strict liability,
// or tort (including negligence or otherwise) arising in any way out of
// the use of this software, even if advised of the possibility of such damage.
//
//M*/

#include "test_precomp.hpp"
#include "opencv2/calib3d.hpp"

using namespace cv;
using namespace std;

class CV_FilterHomographyDecompTest : public cvtest::BaseTest {

public:
    CV_FilterHomographyDecompTest()
    {
        buildTestDataSet();
    }

protected:
    void run(int)
    {
        vector<int> finalSolutions;
		
        filterHomographyDecompByVisibleRefpoints(_rotations, _normals, _prevRectifiedPoints, _currRectifiedPoints, finalSolutions, _mask);

		//there should be at least 2 solution

        ASSERT_TRUE(isValidResult(finalSolutions));
    }

private:

    void buildTestDataSet()
    {
		vector<vector<double>> rotationsVector = {
			{
				0.98811084196540500,
				-0.15276633082836735,
				0.017303530150126534,
				0.14161851662094097,
				0.94821044891315664,
				0.28432576443578628,
				-0.059842791884259422,
				-0.27849487021693553,
				0.95857156619751127
			},
			{
				0.98811084196540500,
				-0.15276633082836735,
				0.017303530150126534,
				0.14161851662094097,
				0.94821044891315664,
				0.28432576443578628,
				-0.059842791884259422,
				-0.27849487021693553,
				0.95857156619751127
			},
			{
				0.95471096402077438,
				-0.21080808634428211,
				-0.20996886890771557,
				0.20702063153797226,
				0.97751379914116743,
				-0.040115216641822840,
				0.21370407880090386,
				-0.0051694506925720751,
				0.97688476468997820
			},
			{
				0.95471096402077438,
				-0.21080808634428211,
				-0.20996886890771557,
				0.20702063153797226,
				0.97751379914116743,
				-0.040115216641822840,
				0.21370407880090386,
				-0.0051694506925720751,
				0.97688476468997820
			}
		};

		vector<vector<double>> normalsVector = {
			{
				-0.023560516110791116,
				0.085818414407956692,
				0.99603217911325403
			},
			{
				0.023560516110791116,
				-0.085818414407956692,
				-0.99603217911325403
			},
			{
				-0.62483547397726014,
				-0.56011861446691769,
				0.54391889853844289
			},
			{
				0.62483547397726014,
				0.56011861446691769,
				-0.54391889853844289
			}
		};

		vector<uint8_t> maskVector = { 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };

		_currRectifiedPoints = {
			Point2f(-0.565732896, -0.321162999),
			Point2f(-0.416198403, -0.299646467),
			Point2f(-0.408354312, -0.290387660),
			Point2f(-0.386555284, -0.287677139),
			Point2f(-0.348475337, -0.276208878),
			Point2f(-0.415957332, -0.266133875),
			Point2f(-0.354961902, -0.257545590),
			Point2f(-0.420189440, -0.255190015),
			Point2f(-0.379785866, -0.252570540),
			Point2f(-0.144345313, -0.249134675),
			Point2f(-0.162417486, -0.223227784),
			Point2f(-0.129876539, -0.219722182),
			Point2f(-0.470801264, -0.211166814),
			Point2f(0.0992607549, -0.209064797),
			Point2f(0.123508267, -0.196303099),
			Point2f(-0.521849990, -0.190706849),
			Point2f(-0.513497114, -0.189186409),
			Point2f(-0.534959674, -0.185138911),
			Point2f(0.121614374, -0.182721153),
			Point2f(0.154205695, -0.183763996),
			Point2f(-0.516449869, -0.181606859),
			Point2f(-0.523427486, -0.180088669),
			Point2f(0.149494573, -0.179563865),
			Point2f(-0.552187204, -0.172630817),
			Point2f(-0.322249800, -0.172333881),
			Point2f(0.127574071, -0.165683150),
			Point2f(0.159817487, -0.162389070),
			Point2f(-0.578930736, -0.160272732),
			Point2f(-0.600617707, -0.155920163),
			Point2f(-0.249115735, -0.154711768),
			Point2f(-0.543279886, -0.144873798),
			Point2f(-0.529992998, -0.142433196),
			Point2f(0.0554505363, -0.142878756),
			Point2f(-0.613355398, -0.132748783),
			Point2f(0.190059289, -0.128930226),
			Point2f(-0.255682647, -0.127393380),
			Point2f(0.0299431719, -0.125339776),
			Point2f(-0.282943249, -0.118550651),
			Point2f(-0.0348402821, -0.115398556),
			Point2f(-0.0362741761, -0.110100254),
			Point2f(-0.319089264, -0.104354575),
			Point2f(-0.0401916653, -0.0852083191),
			Point2f(-0.372183621, -0.0812346712),
			Point2f(-0.00707253255, -0.0810251758),
			Point2f(0.267345309, -0.0787685066),
			Point2f(0.258760840, -0.0768160895),
			Point2f(-0.377273679, -0.0763452053),
			Point2f(-0.0314898677, -0.0743160769),
			Point2f(0.223423928, -0.0724818707),
			Point2f(0.00284322398, -0.0720727518),
			Point2f(0.232531011, -0.0682833865),
			Point2f(0.282355100, -0.0655683428),
			Point2f(-0.233353317, -0.0613981225),
			Point2f(0.290982842, -0.0607336313),
			Point2f(-0.0994169787, -0.0376472026),
			Point2f(0.257561266, -0.0331368558),
			Point2f(0.265076399, -0.0320781991),
			Point2f(0.0454338901, -0.0238198638),
			Point2f(0.0409987904, -0.0186991505),
			Point2f(-0.502306283, -0.0172236171),
			Point2f(-0.464807063, -0.0149533665),
			Point2f(-0.185798749, -0.00540314987),
			Point2f(0.182073534, -0.000651287497),
			Point2f(-0.435764432, 0.00162558386),
			Point2f(-0.181552932, 0.00792864431),
			Point2f(-0.700565279, 0.0110246018),
			Point2f(-0.144087434, 0.0120453080),
			Point2f(-0.524990261, 0.0138590708),
			Point2f(-0.182723984, 0.0165519360),
			Point2f(-0.217308879, 0.0208590515),
			Point2f(0.462978750, 0.0247372910),
			Point2f(0.0956632495, 0.0323494300),
			Point2f(0.0843820646, 0.0424364135),
			Point2f(0.122466311, 0.0441578403),
			Point2f(-0.162433729, 0.0528083183),
			Point2f(0.0964344442, 0.0624147579),
			Point2f(-0.271349967, 0.0727724135),
			Point2f(-0.266336441, 0.0719895661),
			Point2f(0.0675768778, 0.0848240927),
			Point2f(-0.689944625, 0.0889045894),
			Point2f(-0.680990934, 0.0903657600),
			Point2f(-0.119472280, 0.0930491239),
			Point2f(-0.124393739, 0.0933082998),
			Point2f(-0.323403478, 0.0937438533),
			Point2f(-0.323273063, 0.0969979763),
			Point2f(-0.352427900, 0.101048596),
			Point2f(-0.327554941, 0.104539163),
			Point2f(-0.330044419, 0.114519835),
			Point2f(0.0235135648, 0.118004657),
			Point2f(-0.671623945, 0.130437061),
			Point2f(-0.385111898, 0.142786101),
			Point2f(-0.376281500, 0.145800456),
			Point2f(-0.0169987213, 0.148056105),
			Point2f(-0.326495141, 0.152596891),
			Point2f(-0.337120056, 0.154522225),
			Point2f(-0.336885720, 0.154304653),
			Point2f(0.322089493, 0.155130088),
			Point2f(-0.0713477954, 0.163638428),
			Point2f(-0.0208650175, 0.171433330),
			Point2f(-0.380652726, 0.172022790),
			Point2f(-0.0599780641, 0.182294667),
			Point2f(0.244408697, 0.194245726),
			Point2f(-0.101454332, 0.198159069),
			Point2f(0.257901788, 0.200226694),
			Point2f(-0.0775909275, 0.205242962),
			Point2f(0.231870517, 0.222396746),
			Point2f(-0.546760798, 0.242291704),
			Point2f(-0.538914979, 0.243761152),
			Point2f(0.206653103, 0.244874880),
			Point2f(-0.595693469, 0.264329463),
			Point2f(-0.581023335, 0.265664101),
			Point2f(0.00444878871, 0.267031074),
			Point2f(-0.573156178, 0.271591753),
			Point2f(-0.543381274, 0.271759123),
			Point2f(0.00450209389, 0.271335930),
			Point2f(-0.223618075, 0.278416723),
			Point2f(0.161934286, 0.289435983),
			Point2f(-0.199636295, 0.296817899),
			Point2f(-0.250217140, 0.299677849),
			Point2f(-0.258231103, 0.314012855),
			Point2f(-0.628315628, 0.316889286),
			Point2f(0.320948511, 0.316358119),
			Point2f(-0.246845752, 0.320511192),
			Point2f(0.0687271580, 0.321383297),
			Point2f(0.0784438103, 0.322898388),
			Point2f(0.0946765989, 0.325111747),
			Point2f(-0.249674007, 0.328731328),
			Point2f(-0.244633347, 0.329467386),
			Point2f(-0.245841011, 0.334985316),
			Point2f(0.118609101, 0.343532443),
			Point2f(0.0497615598, 0.348162144),
			Point2f(-0.221477821, 0.349263757),
			Point2f(0.0759577379, 0.351840734),
			Point2f(0.0504637137, 0.373238713),
			Point2f(0.0730970055, 0.376537383),
			Point2f(-0.204333842, 0.381100655),
			Point2f(-0.557245076, -0.339432925),
			Point2f(-0.402010202, -0.288829565),
			Point2f(-0.350465477, -0.281259984),
			Point2f(-0.352995187, -0.264569730),
			Point2f(-0.466762394, -0.217114508),
			Point2f(0.152002022, -0.217566550),
			Point2f(0.146226048, -0.183914393),
			Point2f(0.0949312001, -0.177005857),
			Point2f(-0.211882949, -0.175594494),
			Point2f(-0.531562269, -0.173924312),
			Point2f(-0.0727246776, -0.167270422),
			Point2f(0.0546481088, -0.140193000),
			Point2f(-0.296819001, -0.137850702),
			Point2f(-0.261863053, -0.139540121),
			Point2f(0.187967837, -0.131033540),
			Point2f(0.322852045, -0.112108752),
			Point2f(-0.0432251953, -0.102951847),
			Point2f(-0.0453428440, -0.0914504975),
			Point2f(-0.0182842426, -0.0918859020),
			Point2f(0.0140433423, -0.0904538929),
			Point2f(-0.377287626, -0.0817026496),
			Point2f(0.266108125, -0.0797783583),
			Point2f(0.257961422, -0.0767710134),
			Point2f(-0.495943695, -0.0683977529),
			Point2f(0.231466040, -0.0675206482),
			Point2f(-0.240675926, -0.0551427566),
			Point2f(-0.482824773, -0.0510699376),
			Point2f(-0.491354793, -0.0414650664),
			Point2f(-0.0960614979, -0.0377000235),
			Point2f(-0.102409534, -0.0369749814),
			Point2f(-0.471273214, -0.0325376652),
			Point2f(-0.483320534, -0.0174943600),
			Point2f(-0.457503378, -0.0152483145),
			Point2f(-0.178161725, -0.0153892851),
			Point2f(-0.483233035, -0.0106405178),
			Point2f(-0.472914547, -0.0105228210),
			Point2f(-0.166542307, -0.00667150877),
			Point2f(0.181261331, -0.00449455017),
			Point2f(-0.474292487, -0.00428914558),
			Point2f(-0.185297221, -0.00575157674),
			Point2f(-0.494381040, -0.00278507406),
			Point2f(-0.141748473, -0.00289725070),
			Point2f(-0.487515569, 0.000758233888),
			Point2f(0.322646528, 0.0197495818),
			Point2f(0.142943904, 0.0276249554),
			Point2f(-0.563232243, 0.0306834858),
			Point2f(-0.555995941, 0.0367121249),
			Point2f(0.114935011, 0.0496927276),
			Point2f(-0.152954608, 0.0538645200),
			Point2f(-0.594885707, 0.0562511310),
			Point2f(0.0678326488, 0.0756176412),
			Point2f(-0.667605639, 0.0828208700),
			Point2f(-0.354470938, 0.101424232),
			Point2f(0.0228204262, 0.120382607),
			Point2f(-0.639557123, 0.124422595),
			Point2f(-0.690505445, 0.126883239),
			Point2f(-0.395509213, 0.130242139),
			Point2f(-0.00618012529, 0.139929801),
			Point2f(0.175945997, 0.140235618),
			Point2f(0.198833048, 0.167587668),
			Point2f(-0.334679037, 0.177859858),
			Point2f(0.236127406, 0.192743436),
			Point2f(0.283146858, 0.204260647),
			Point2f(-0.0354267135, 0.206209183),
			Point2f(0.247388184, 0.207016930),
			Point2f(-0.0422560424, 0.212493256),
			Point2f(0.261681855, 0.215763748),
			Point2f(0.207528576, 0.219807997),
			Point2f(-0.300219178, 0.221922547),
			Point2f(0.206393883, 0.245171010),
			Point2f(0.239619836, 0.244768366),
			Point2f(-0.523026288, 0.250639766),
			Point2f(-0.591975033, 0.254252791),
			Point2f(0.246785000, 0.252878994),
			Point2f(0.272995651, 0.255815417),
			Point2f(0.00825022161, 0.265591830),
			Point2f(0.192723796, 0.266924977),
			Point2f(-0.222951472, 0.290150762),
			Point2f(-0.545146644, 0.304910392),
			Point2f(0.131736591, 0.319247276),
			Point2f(0.319435924, 0.317917794),
			Point2f(0.0687546134, 0.321296155),
			Point2f(-0.255853772, 0.327258259),
			Point2f(0.0948092714, 0.325284332),
			Point2f(0.104488030, 0.327628911),
			Point2f(-0.245483562, 0.327617317),
			Point2f(0.0647632629, 0.363111496),
			Point2f(-0.382861346, -0.287226975),
			Point2f(-0.354297429, -0.278708905),
			Point2f(-0.356116027, -0.262691110),
			Point2f(-0.369049937, -0.237850189),
			Point2f(-0.146217853, -0.233530551),
			Point2f(0.102752604, -0.223108903),
			Point2f(0.137545392, -0.218163848),
			Point2f(0.125815898, -0.216970086),
			Point2f(-0.557826996, -0.194665924),
			Point2f(-0.533946335, -0.184958249),
			Point2f(0.0976954028, -0.173691019),
			Point2f(-0.240166873, -0.160652772),
			Point2f(0.166464865, -0.154563308),
			Point2f(-0.0330923162, -0.125799045),
			Point2f(-0.290044904, -0.118914597),
			Point2f(0.00350888353, -0.108661920),
			Point2f(-0.0109116854, -0.106212743),
			Point2f(-0.0298740193, -0.102953635),
			Point2f(-0.287203342, -0.0997403413),
			Point2f(-0.269498408, -0.0981520712),
			Point2f(-0.000815737061, -0.0938294530),
			Point2f(0.274663270, -0.0844340026),
			Point2f(-0.371082008, -0.0805466920),
			Point2f(-0.368196100, -0.0743779093),
			Point2f(0.00675902702, -0.0735078678),
			Point2f(0.226267770, -0.0744194537),
			Point2f(-0.241736412, -0.0630025938),
			Point2f(-0.408663541, -0.0564615242),
			Point2f(0.251640886, -0.0519632548),
			Point2f(0.249993712, -0.0519672707),
			Point2f(-0.426033378, -0.0365641154),
			Point2f(-0.467352122, -0.0305716563),
			Point2f(0.251341015, -0.0268137120),
			Point2f(-0.443456501, -0.0243669953),
			Point2f(-0.502199471, -0.0151771074),
			Point2f(-0.178487480, -0.0155749097),
			Point2f(0.178145915, -0.00528379623),
			Point2f(-0.492981344, -0.00174682145),
			Point2f(-0.150337398, 0.000692513015),
			Point2f(-0.457302928, 0.00352234906),
			Point2f(0.190587431, 0.00151424226),
			Point2f(-0.482671946, 0.00682042213),
			Point2f(-0.158589542, 0.0150188655),
			Point2f(-0.182223722, 0.0145649035),
			Point2f(0.107089065, 0.0223725326),
			Point2f(0.135399371, 0.0275243558),
			Point2f(-0.552838683, 0.0275048595),
			Point2f(-0.432176501, 0.0248741303),
			Point2f(-0.192510992, 0.0281074084),
			Point2f(-0.553043425, 0.0298770685),
			Point2f(-0.684887648, 0.0436144769),
			Point2f(0.0850105733, 0.0448755622),
			Point2f(-0.165784389, 0.0439001285),
			Point2f(0.102653719, 0.0457992665),
			Point2f(0.114853017, 0.0504316092),
			Point2f(-0.647432685, 0.0608204119),
			Point2f(0.0828530043, 0.0608987175),
			Point2f(0.0894377902, 0.0742467493),
			Point2f(0.0702404827, 0.0767309442),
			Point2f(-0.613642335, 0.0779517740),
			Point2f(-0.670592189, 0.0849624202),
			Point2f(-0.395209312, 0.0854151621),
			Point2f(0.125186160, 0.0919951499),
			Point2f(-0.359707922, 0.102121405),
			Point2f(-0.354259193, 0.101300709),
			Point2f(0.0304000825, 0.110619470),
			Point2f(-0.677573025, 0.114422500),
			Point2f(0.0305799693, 0.121603437),
			Point2f(-0.358950615, 0.121660560),
			Point2f(-0.718753040, 0.134569481),
			Point2f(0.256451160, 0.141883001),
			Point2f(-0.0904129520, 0.146879435),
			Point2f(-0.0184279438, 0.148968369),
			Point2f(-0.356992692, 0.160104826),
			Point2f(-0.337676436, 0.161766291),
			Point2f(0.201174691, 0.169025913),
			Point2f(-0.378423393, 0.170933828),
			Point2f(-0.601599216, 0.174998865),
			Point2f(-0.0902864039, 0.184311926),
			Point2f(-0.0584819093, 0.184186250),
			Point2f(0.294467270, 0.182560727),
			Point2f(0.250262231, 0.186239958),
			Point2f(-0.326370239, 0.191697389),
			Point2f(-0.0980727375, 0.196913749),
			Point2f(0.253085673, 0.201914877),
			Point2f(-0.0344332159, 0.205900863),
			Point2f(0.255287141, 0.203029931),
			Point2f(-0.452713937, 0.205191836),
			Point2f(0.264822274, 0.217408702),
			Point2f(-0.0290334225, 0.221684650),
			Point2f(-0.583990574, 0.237398431),
			Point2f(-0.145020664, 0.240374506),
			Point2f(0.249667659, 0.254706532),
			Point2f(0.274279058, 0.256447285),
			Point2f(-0.282936275, 0.259140193),
			Point2f(0.241211995, 0.260401577),
			Point2f(-0.590560019, 0.272659779),
			Point2f(-0.574947417, 0.272671998),
			Point2f(-0.224780366, 0.279990941),
			Point2f(-0.525540829, 0.287235677),
			Point2f(-0.247069210, 0.298608154),
			Point2f(-0.201292604, 0.298156679),
			Point2f(0.319822490, 0.317605704),
			Point2f(-0.248013541, 0.320789784),
			Point2f(0.0957527757, 0.326543272),
			Point2f(0.105006196, 0.328469753),
			Point2f(-0.264089525, 0.332354158),
			Point2f(-0.670460403, 0.339870930),
			Point2f(0.118318990, 0.345167071),
			Point2f(0.0737744719, 0.353734553),
			Point2f(0.0655663237, 0.361025929),
			Point2f(-0.306805104, 0.363820761),
			Point2f(0.0524423867, 0.371921480),
			Point2f(0.0713953897, 0.375074357),
			Point2f(-0.411387652, -0.268335998),
			Point2f(-0.357590824, -0.263346583),
			Point2f(-0.407676578, -0.253785878),
			Point2f(0.0660323426, -0.253718942),
			Point2f(-0.157670841, -0.225629836),
			Point2f(0.170453921, -0.220800355),
			Point2f(-0.475751191, -0.209005311),
			Point2f(-0.331408232, -0.203059763),
			Point2f(-0.173841938, -0.199112654),
			Point2f(-0.503261328, -0.193795130),
			Point2f(-0.532277644, -0.190292686),
			Point2f(-0.0972326621, -0.191563144),
			Point2f(-0.0692789108, -0.172031537),
			Point2f(-0.318824291, -0.169072524),
			Point2f(-0.576232314, -0.162124678),
			Point2f(-0.0839322209, -0.156304389),
			Point2f(-0.583625376, -0.142171323),
			Point2f(-0.0546422042, -0.135338858),
			Point2f(0.0501612425, -0.132490858),
			Point2f(-0.645011544, -0.111341864),
			Point2f(-0.0925374180, -0.0483307689),
			Point2f(-0.444242209, -0.0263337940),
			Point2f(0.0335495919, -0.0281750113),
			Point2f(0.274629444, -0.0259516705),
			Point2f(0.213774025, -0.0240113474),
			Point2f(-0.194874078, -0.0151330847),
			Point2f(0.175111562, -0.00868577976),
			Point2f(-0.185011521, -0.000680683181),
			Point2f(0.152071685, 0.0204544198),
			Point2f(0.321354061, 0.0199794695),
			Point2f(-0.192160159, 0.0275637116),
			Point2f(-0.189656645, 0.0275667012),
			Point2f(0.137452200, 0.0298070628),
			Point2f(-0.194602579, 0.0449027494),
			Point2f(-0.647751570, 0.0625102371),
			Point2f(0.124078721, 0.0639316663),
			Point2f(0.125849217, 0.0762147456),
			Point2f(-0.614036798, 0.0778791085),
			Point2f(-0.684063017, 0.0867959261),
			Point2f(-0.670344174, 0.0846142769),
			Point2f(-0.127689242, 0.0883567855),
			Point2f(0.123796627, 0.0907361880),
			Point2f(-0.356352538, 0.101948388),
			Point2f(-0.388843179, 0.110183217),
			Point2f(0.0316384435, 0.123791300),
			Point2f(-0.627986908, 0.146491125),
			Point2f(-0.0747071728, 0.158135459),
			Point2f(-0.0235102437, 0.168867558),
			Point2f(-0.0903210714, 0.184088305),
			Point2f(0.292073458, 0.183571488),
			Point2f(-0.0585953295, 0.184784085),
			Point2f(-0.0317775607, 0.218368888),
			Point2f(0.209752038, 0.223883361),
			Point2f(-0.295424402, 0.229150623),
			Point2f(-0.144439027, 0.237902716),
			Point2f(-0.284140587, 0.262761474),
			Point2f(0.289083928, 0.276900887),
			Point2f(0.159017235, 0.300793648),
			Point2f(-0.204925507, 0.298536539),
			Point2f(-0.544958472, 0.305164427),
			Point2f(-0.261615157, 0.306550682),
			Point2f(0.0977220088, 0.327949613),
			Point2f(0.109876208, 0.337665111),
			Point2f(-0.283918083, 0.347385526),
			Point2f(0.0436712503, 0.350702018),
			Point2f(0.114512287, 0.367949426),
			Point2f(0.106543839, 0.375095814),
			Point2f(0.505324781, -0.272183985),
			Point2f(0.0645913780, -0.251512915),
			Point2f(-0.457196057, -0.225893468),
			Point2f(-0.480293810, -0.222602293),
			Point2f(-0.138176888, -0.209798917),
			Point2f(-0.110901751, -0.198036820),
			Point2f(-0.196451947, -0.191723794),
			Point2f(-0.537742376, -0.174413025),
			Point2f(-0.0650562346, -0.174762890),
			Point2f(-0.567489207, -0.165461496),
			Point2f(0.0879585966, -0.163023785),
			Point2f(-0.303777844, -0.142031133),
			Point2f(0.199195996, -0.141861767),
			Point2f(0.0491657220, -0.132264882),
			Point2f(-0.497363061, -0.107934952),
			Point2f(-0.000536393432, -0.102828167),
			Point2f(0.0155952247, -0.0998895392),
			Point2f(-0.363601953, -0.0897399634),
			Point2f(-0.224325985, -0.0719678402),
			Point2f(-0.0638299435, -0.0646244809),
			Point2f(-0.108656809, -0.0468749776),
			Point2f(-0.0865045264, -0.0512534790),
			Point2f(-0.469339728, -0.0279338267),
			Point2f(0.0578282699, -0.0133374622),
			Point2f(-0.195265710, -0.0115369316),
			Point2f(0.296735317, -0.0132813146),
			Point2f(0.0664219409, 0.0134935537),
			Point2f(0.126060545, 0.0333039127),
			Point2f(0.139887005, 0.0334976614),
			Point2f(-0.547339618, 0.0433730707),
			Point2f(0.0866046399, 0.0527233221),
			Point2f(0.131943896, 0.0657638907),
			Point2f(-0.280056775, 0.0685855150),
			Point2f(0.0746403933, 0.0795079395),
			Point2f(0.125382811, 0.0822770745),
			Point2f(-0.648187757, 0.103887804),
			Point2f(-0.107411072, 0.107508548),
			Point2f(0.0155869983, 0.108978622),
			Point2f(0.0189307462, 0.129617691),
			Point2f(0.162685350, 0.127225950),
			Point2f(-0.0875291452, 0.142281070),
			Point2f(0.319728941, 0.148827255),
			Point2f(-0.0259547811, 0.169724479),
			Point2f(0.259297132, 0.190075457),
			Point2f(-0.467013776, 0.212794706),
			Point2f(-0.315732479, 0.219243437),
			Point2f(-0.111042649, 0.217940107),
			Point2f(0.239550352, 0.222786069),
			Point2f(0.263966352, 0.260309041),
			Point2f(0.320023954, -0.222228840),
			Point2f(-0.322707742, -0.213004455),
			Point2f(-0.224977970, -0.169595599),
			Point2f(-0.605799317, -0.142425537),
			Point2f(0.0454332717, -0.129945949),
			Point2f(0.205748767, -0.113405459),
			Point2f(0.317985803, -0.118630089),
			Point2f(0.497755647, -0.0962266177),
			Point2f(-0.393495560, -0.0904672816),
			Point2f(0.240035087, -0.0737613589),
			Point2f(-0.212947786, -0.0280145984),
			Point2f(0.0674179196, 0.0124880793),
			Point2f(-0.545862198, 0.0207057912),
			Point2f(-0.284409463, 0.0626631007),
			Point2f(-0.107082598, 0.0854173824),
			Point2f(0.0578137375, 0.0917839557),
			Point2f(0.145844117, 0.102937251),
			Point2f(0.183878779, 0.119614877),
			Point2f(-0.626380265, 0.140862882),
			Point2f(-0.0325521491, 0.161834121),
			Point2f(-0.590211987, 0.167720392),
			Point2f(0.289599866, 0.186565816),
			Point2f(-0.328821093, 0.187714070),
			Point2f(-0.289086968, 0.205165654),
			Point2f(-0.445392698, 0.215343162),
			Point2f(0.173715711, 0.273563296),
			Point2f(0.284015119, 0.270610362),
			Point2f(0.0174398609, 0.283809274),
			Point2f(-0.496335506, -0.202981815),
			Point2f(0.0389454551, -0.166210428),
			Point2f(-0.317301393, -0.156280205),
			Point2f(-0.396320462, -0.0949599668),
			Point2f(-0.213638976, -0.0776446015),
			Point2f(0.497601509, -0.0928353444),
			Point2f(-0.260220319, -0.0718628615),
			Point2f(-0.116495222, -0.0543703064),
			Point2f(-0.118132629, -0.0156126227),
			Point2f(0.0242815297, 0.00629332382),
			Point2f(-0.537928998, 0.00815516617),
			Point2f(0.317720622, 0.0271231923),
			Point2f(-0.582170665, 0.0478387438),
			Point2f(-0.536856830, 0.0466793887),
			Point2f(-0.220819592, 0.0433096550),
			Point2f(-0.246473342, 0.0572598167),
			Point2f(0.481240988, 0.0503845438),
			Point2f(-0.102453016, 0.0649363101),
			Point2f(-0.149955124, 0.0744054317),
			Point2f(-0.248215869, 0.0916868672),
			Point2f(-0.101221249, 0.110788561),
			Point2f(-0.437672526, 0.179065496),
			Point2f(-0.0383506976, 0.183546484),
			Point2f(-0.279600590, 0.208760634),
			Point2f(0.182261929, 0.275244594),
			Point2f(0.0253023170, -0.170456246),
			Point2f(-0.476852804, -0.123630777),
			Point2f(-0.0803126246, -0.0782076195),
			Point2f(-0.133338496, -0.0659459904),
			Point2f(-0.0822777376, -0.00390591589),
			Point2f(0.149250969, 0.104314201),
			Point2f(0.0418044887, 0.149009049),
			Point2f(-0.438308835, 0.164682120)
		};

		_prevRectifiedPoints = {
			Point2f(-0.599324584, -0.381164283),
			Point2f(-0.387985110, -0.385367423),
			Point2f(-0.371437579, -0.371891201),
			Point2f(-0.340867460, -0.370632380),
			Point2f(-0.289822906, -0.364118159),
			Point2f(-0.372411519, -0.335272551),
			Point2f(-0.289586753, -0.335766882),
			Point2f(-0.372335523, -0.316857219),
			Point2f(-0.321099430, -0.323233813),
			Point2f(0.208661616, -0.153931335),
			Point2f(-0.559897065, 0.193362445),
			Point2f(0.0181128159, -0.325224668),
			Point2f(-0.427504510, 0.105302416),
			Point2f(0.487470537, -0.187071189),
			Point2f(0.343267351, -0.339755565),
			Point2f(-0.477639943, -0.204375938),
			Point2f(-0.466626763, -0.204072326),
			Point2f(0.340813518, -0.347292691),
			Point2f(0.342682719, -0.320172101),
			Point2f(0.383663863, -0.327343374),
			Point2f(-0.467062414, -0.193995550),
			Point2f(-0.475603998, -0.189820126),
			Point2f(0.552475691, 0.198386014),
			Point2f(-0.508027375, -0.174297482),
			Point2f(-0.211989403, -0.217261642),
			Point2f(0.180832058, -0.127527758),
			Point2f(-0.112721168, -0.125876635),
			Point2f(-0.112387165, -0.167135969),
			Point2f(-0.562491000, -0.140186235),
			Point2f(0.395156831, -0.298828602),
			Point2f(-0.485202312, -0.135626689),
			Point2f(0.148358017, -0.195937276),
			Point2f(-0.248159677, -0.254669130),
			Point2f(-0.568366945, -0.105187029),
			Point2f(-0.0714842379, -0.0832463056),
			Point2f(-0.497599572, -0.205334768),
			Point2f(-0.0948727652, 0.245045587),
			Point2f(0.160857186, 0.138075173),
			Point2f(0.164952606, -0.195109487),
			Point2f(0.165254518, -0.186554477),
			Point2f(-0.183777973, -0.124357253),
			Point2f(0.166813776, -0.153241888),
			Point2f(-0.241765827, -0.0820638761),
			Point2f(0.208661616, -0.153931335),
			Point2f(0.540147483, -0.203156039),
			Point2f(0.529201686, -0.199348077),
			Point2f(-0.248159677, -0.254669130),
			Point2f(0.180369601, -0.139303327),
			Point2f(0.570952237, -0.185722873),
			Point2f(0.221771300, -0.143187970),
			Point2f(0.498627752, -0.183768719),
			Point2f(0.561214447, -0.188666284),
			Point2f(-0.241409421, -0.253560483),
			Point2f(0.569648385, -0.184499770),
			Point2f(0.276665628, -0.0881819800),
			Point2f(0.533934176, -0.142226711),
			Point2f(-0.299728751, -0.330407321),
			Point2f(0.270322412, -0.256552309),
			Point2f(-0.255016476, -0.0823200271),
			Point2f(-0.378096581, 0.0264666155),
			Point2f(-0.331565350, 0.0210608803),
			Point2f(0.0100810500, -0.0213523544),
			Point2f(-0.248159677, -0.254669130),
			Point2f(0.249623299, 0.164078355),
			Point2f(0.0190342199, -0.00415771967),
			Point2f(0.604407132, -0.259350061),
			Point2f(0.0660026148, -0.00787150953),
			Point2f(0.605921566, 0.114344336),
			Point2f(0.0208173525, 0.00527517078),
			Point2f(-0.0200567022, 0.0183092188),
			Point2f(-0.184784368, -0.193566754),
			Point2f(-0.0125719802, -0.344967902),
			Point2f(0.343063682, -0.0121044181),
			Point2f(0.389022052, -0.0171062462),
			Point2f(0.163190305, 0.200014487),
			Point2f(0.362440646, 0.0120019922),
			Point2f(-0.427743971, 0.100272447),
			Point2f(-0.0714842379, -0.0832463056),
			Point2f(0.0664352402, 0.0467514023),
			Point2f(-0.559897065, 0.193362445),
			Point2f(-0.549086213, 0.193808615),
			Point2f(-0.241472989, -0.253163874),
			Point2f(-0.241765827, -0.0820638761),
			Point2f(-0.122216024, 0.132651567),
			Point2f(-0.122216024, 0.132651567),
			Point2f(0.515065968, 0.205271944),
			Point2f(0.180832058, -0.127527758),
			Point2f(-0.123633556, 0.154476687),
			Point2f(-0.248159677, -0.254669130),
			Point2f(0.0208173525, 0.00527517078),
			Point2f(-0.483276874, 0.191274792),
			Point2f(-0.167928949, 0.200682297),
			Point2f(0.232745290, -0.211950779),
			Point2f(-0.288701504, -0.334238827),
			Point2f(-0.119621970, 0.204155236),
			Point2f(-0.119621970, 0.204155236),
			Point2f(0.632996142, 0.0804972649),
			Point2f(0.189231426, 0.164325386),
			Point2f(0.249623299, 0.164078355),
			Point2f(0.0676716864, 0.0479496233),
			Point2f(0.207636267, 0.184271768),
			Point2f(-0.300510556, 0.358790994),
			Point2f(-0.107678331, 0.188473806),
			Point2f(0.565983415, 0.144723341),
			Point2f(0.191329703, 0.213909492),
			Point2f(-0.0283227600, -0.373237878),
			Point2f(-0.184958130, 0.200373843),
			Point2f(0.0346363746, -0.0259889495),
			Point2f(-0.112387165, -0.167135969),
			Point2f(0.251426309, 0.210430339),
			Point2f(-0.477397382, -0.131372169),
			Point2f(-0.0667442903, 0.0997460634),
			Point2f(0.251426309, 0.210430339),
			Point2f(-0.317926824, 0.375238001),
			Point2f(-0.0621999837, 0.280056626),
			Point2f(0.0443522707, 0.321513236),
			Point2f(0.471269101, 0.260774940),
			Point2f(-0.107678331, 0.188473806),
			Point2f(0.0208210852, 0.350526422),
			Point2f(0.0157474391, 0.367335707),
			Point2f(0.632996142, 0.0804972649),
			Point2f(0.646697879, 0.265504390),
			Point2f(0.0295150280, 0.371205181),
			Point2f(0.376071006, 0.313471258),
			Point2f(-0.379525930, 0.364357829),
			Point2f(-0.00628023129, -0.0373278372),
			Point2f(0.0291138459, 0.381194293),
			Point2f(0.0358079821, 0.381886899),
			Point2f(0.0344478637, 0.386993408),
			Point2f(0.433862329, 0.328515977),
			Point2f(0.359724253, 0.345606029),
			Point2f(0.0651357397, 0.397334814),
			Point2f(0.388413996, 0.344747871),
			Point2f(-0.140228778, 0.216103494),
			Point2f(0.389989913, 0.372472703),
			Point2f(0.444995403, 0.300240308),
			Point2f(-0.606455386, 0.100793049),
			Point2f(-0.362332910, -0.371920794),
			Point2f(-0.478956074, 0.234040022),
			Point2f(-0.289441198, -0.344822973),
			Point2f(-0.0714842379, -0.0832463056),
			Point2f(0.375879139, -0.374975592),
			Point2f(0.376526117, -0.326493502),
			Point2f(0.313251913, -0.306372881),
			Point2f(-0.0577337518, 0.0893306211),
			Point2f(-0.483683407, -0.179540694),
			Point2f(-0.0763650239, -0.258294433),
			Point2f(0.276665628, -0.0881819800),
			Point2f(-0.167122558, -0.175508693),
			Point2f(-0.164081737, 0.176902041),
			Point2f(0.276665628, -0.0881819800),
			Point2f(0.602967978, -0.260941893),
			Point2f(0.158573851, -0.178748295),
			Point2f(0.159815103, -0.160761341),
			Point2f(0.194283918, -0.165657878),
			Point2f(0.231515527, -0.172808051),
			Point2f(-0.247000366, 0.277822912),
			Point2f(0.538969517, -0.204621449),
			Point2f(0.531404376, -0.198565826),
			Point2f(-0.388338953, -0.0433262810),
			Point2f(0.499413073, -0.181929186),
			Point2f(-0.237337112, 0.0934364349),
			Point2f(-0.368045300, -0.0204487685),
			Point2f(-0.374767631, -0.00678646797),
			Point2f(-0.0667242110, -0.248651102),
			Point2f(-0.248159677, -0.254669130),
			Point2f(-0.345217139, -0.00101677026),
			Point2f(-0.353382975, 0.0210586078),
			Point2f(-0.322639942, 0.0211628731),
			Point2f(0.0184581745, -0.0366852731),
			Point2f(0.0259528626, -0.0136881955),
			Point2f(-0.339446336, 0.0286702402),
			Point2f(0.0335014127, -0.0271516014),
			Point2f(0.465966076, 0.0830826238),
			Point2f(-0.337860256, 0.0362124667),
			Point2f(0.188271523, -0.146541893),
			Point2f(-0.298272073, -0.323130161),
			Point2f(0.0643569306, -0.0264105909),
			Point2f(-0.353804410, 0.0433940105),
			Point2f(0.618646920, -0.0855877250),
			Point2f(0.411329508, -0.0414552018),
			Point2f(-0.427743971, 0.100272447),
			Point2f(-0.247000366, 0.277822912),
			Point2f(0.381912649, -0.00914942939),
			Point2f(0.0664352402, 0.0467514023),
			Point2f(0.138687640, -0.114854909),
			Point2f(-0.0170480162, -0.372787565),
			Point2f(-0.535477102, 0.183755845),
			Point2f(-0.155668780, 0.144164801),
			Point2f(-0.427504510, 0.105302416),
			Point2f(-0.484430760, 0.227277100),
			Point2f(-0.361284673, -0.373513311),
			Point2f(-0.316764563, 0.331503242),
			Point2f(-0.0230990555, 0.314180285),
			Point2f(0.101539977, -0.256640851),
			Point2f(-0.210743994, -0.111771651),
			Point2f(-0.560086846, 0.151153624),
			Point2f(0.542884171, 0.141691014),
			Point2f(0.596041858, 0.144990161),
			Point2f(0.239398748, 0.207432285),
			Point2f(0.557545543, 0.155783832),
			Point2f(0.233033463, 0.214694947),
			Point2f(0.572789013, 0.162068501),
			Point2f(0.512761712, 0.176260322),
			Point2f(0.287076950, 0.0868823677),
			Point2f(0.515065968, 0.205271944),
			Point2f(0.552475691, 0.198386014),
			Point2f(-0.301232725, 0.347804308),
			Point2f(-0.379525930, 0.364357829),
			Point2f(0.561403453, 0.206571117),
			Point2f(0.590792358, 0.206283644),
			Point2f(-0.428855836, 0.100270294),
			Point2f(0.300039053, -0.283949375),
			Point2f(0.0481642894, 0.334260821),
			Point2f(-0.173260480, -0.167126089),
			Point2f(0.444995403, 0.300240308),
			Point2f(0.646697879, 0.265504390),
			Point2f(0.375487208, 0.314186513),
			Point2f(0.0217850581, 0.381838262),
			Point2f(0.404422343, 0.313856274),
			Point2f(0.417644382, 0.314869910),
			Point2f(0.0358079821, 0.381886899),
			Point2f(0.378262609, 0.358303785),
			Point2f(-0.336999178, -0.367679387),
			Point2f(-0.295442462, -0.365161836),
			Point2f(-0.293496192, -0.342732310),
			Point2f(-0.298767596, -0.303165644),
			Point2f(-0.0111337993, -0.342149645),
			Point2f(0.310648471, -0.374146342),
			Point2f(0.359467417, -0.373746723),
			Point2f(0.340779394, -0.369219989),
			Point2f(-0.527450860, -0.203896046),
			Point2f(-0.490746915, -0.194764644),
			Point2f(0.314866364, -0.300261766),
			Point2f(-0.0298556220, 0.0591949411),
			Point2f(0.319549739, 0.0552458987),
			Point2f(0.163977623, -0.209844783),
			Point2f(-0.149107113, -0.149005055),
			Point2f(0.212483421, -0.191198543),
			Point2f(0.197611198, -0.187811792),
			Point2f(0.174361721, -0.179897651),
			Point2f(0.0387913659, -0.0366905928),
			Point2f(-0.122265801, -0.126270071),
			Point2f(0.211038783, -0.172842503),
			Point2f(0.246728286, 0.134398326),
			Point2f(-0.0577337518, 0.0893306211),
			Point2f(-0.415295422, 0.105914228),
			Point2f(-0.292730510, 0.0379575789),
			Point2f(0.489636958, -0.194117576),
			Point2f(-0.254337519, 0.0937413648),
			Point2f(0.336177140, 0.305443168),
			Point2f(0.526942134, -0.164069965),
			Point2f(0.524966419, -0.165161178),
			Point2f(-0.379173398, 0.332068861),
			Point2f(-0.340792000, 0.00105464540),
			Point2f(0.525632977, -0.134992197),
			Point2f(-0.308774501, 0.00290521770),
			Point2f(-0.375407755, 0.0294080544),
			Point2f(0.0178439785, -0.0365749858),
			Point2f(-0.255016476, -0.0823200271),
			Point2f(-0.359951973, 0.0446678996),
			Point2f(0.0564084686, -0.0197724514),
			Point2f(-0.315141559, 0.0424463004),
			Point2f(0.292196661, 0.279810339),
			Point2f(-0.345294952, 0.0533128195),
			Point2f(0.0458479226, -0.00109126628),
			Point2f(0.0179449394, 0.00371767790),
			Point2f(0.365872562, -0.0412087664),
			Point2f(0.403013051, -0.0416624695),
			Point2f(-0.0714842379, -0.0832463056),
			Point2f(-0.209011748, 0.133690849),
			Point2f(0.0122421598, 0.0230175443),
			Point2f(-0.0577337518, 0.0893306211),
			Point2f(-0.572846889, 0.141102776),
			Point2f(0.345340014, -0.0111671211),
			Point2f(0.0479373708, 0.0379454680),
			Point2f(0.363291621, -0.00829032529),
			Point2f(0.381912649, -0.00914942939),
			Point2f(-0.521542430, 0.151489466),
			Point2f(0.345966965, 0.0110620018),
			Point2f(0.354562849, 0.0254590791),
			Point2f(0.334322065, 0.0310698878),
			Point2f(-0.00463629747, -0.0357710384),
			Point2f(-0.538667142, 0.185365483),
			Point2f(-0.209011748, 0.133690849),
			Point2f(0.398122877, 0.0403857268),
			Point2f(-0.160881191, 0.145009249),
			Point2f(-0.155668780, 0.144164801),
			Point2f(-0.0714842379, -0.0832463056),
			Point2f(-0.536377013, 0.221241340),
			Point2f(-0.0632879063, -0.247039422),
			Point2f(-0.155869946, 0.169341147),
			Point2f(0.578685045, -0.223878756),
			Point2f(0.557447612, 0.0768704116),
			Point2f(-0.188812047, 0.228197843),
			Point2f(0.246747240, 0.136472240),
			Point2f(-0.142677084, 0.213736445),
			Point2f(-0.118143238, 0.208306640),
			Point2f(-0.388338953, -0.0433262810),
			Point2f(-0.163515776, 0.231573820),
			Point2f(-0.0738375857, -0.256104171),
			Point2f(0.173092276, 0.191535592),
			Point2f(0.208548918, 0.185476139),
			Point2f(-0.392410189, 0.0686017647),
			Point2f(0.555366814, 0.130478472),
			Point2f(-0.101943128, -0.113997340),
			Point2f(0.0716935173, 0.340265751),
			Point2f(0.561738014, 0.148283109),
			Point2f(0.242452115, 0.205116034),
			Point2f(0.561738014, 0.148283109),
			Point2f(-0.427743971, 0.100272447),
			Point2f(0.578137994, 0.163653031),
			Point2f(0.251277626, 0.223055005),
			Point2f(-0.376505047, 0.343530416),
			Point2f(-0.0714842379, -0.0832463056),
			Point2f(0.567448437, 0.207419440),
			Point2f(0.590792358, 0.206283644),
			Point2f(0.578685045, -0.223878756),
			Point2f(0.0635343120, -0.00499309227),
			Point2f(-0.370767444, 0.384881169),
			Point2f(-0.485191971, -0.120962359),
			Point2f(0.512761712, 0.176260322),
			Point2f(-0.375972956, 0.0288736783),
			Point2f(-0.147176415, -0.185790271),
			Point2f(0.0752977654, 0.339190871),
			Point2f(0.646697879, 0.265504390),
			Point2f(0.0282997675, 0.373214334),
			Point2f(0.410353780, 0.316089481),
			Point2f(0.417644382, 0.314869910),
			Point2f(0.0147482762, 0.389459789),
			Point2f(-0.182916895, -0.140514761),
			Point2f(0.433515042, 0.330774426),
			Point2f(0.388069838, 0.347381502),
			Point2f(0.378925055, 0.357438952),
			Point2f(0.247128293, -0.116897359),
			Point2f(-0.0230906308, 0.314556211),
			Point2f(0.388534039, 0.370789021),
			Point2f(-0.368050814, -0.339653373),
			Point2f(-0.292694926, -0.341653705),
			Point2f(-0.353774697, -0.320387989),
			Point2f(0.599263310, -0.264537901),
			Point2f(-0.0213720929, -0.326088905),
			Point2f(-0.571947694, 0.141147330),
			Point2f(-0.0577337518, 0.0893306211),
			Point2f(0.108424753, -0.267108470),
			Point2f(-0.0317604132, -0.0458168685),
			Point2f(-0.0967136100, 0.242639020),
			Point2f(-0.486509413, -0.204596937),
			Point2f(0.239178345, -0.219647482),
			Point2f(0.108424753, -0.267108470),
			Point2f(-0.280393064, -0.283867925),
			Point2f(-0.533659995, -0.151733354),
			Point2f(0.0880429000, -0.240412414),
			Point2f(-0.534965396, -0.124174178),
			Point2f(0.142445788, -0.118948005),
			Point2f(0.0947291106, 0.0767719224),
			Point2f(-0.597055852, -0.0692315027),
			Point2f(-0.254337519, 0.0937413648),
			Point2f(-0.308869720, 0.00354974205),
			Point2f(-0.409894019, -0.0694356859),
			Point2f(0.556049764, -0.137727231),
			Point2f(-0.0317604132, -0.0458168685),
			Point2f(-0.524152219, 0.239541322),
			Point2f(0.108424753, -0.267108470),
			Point2f(0.0143662402, -0.0164190196),
			Point2f(0.150936082, 0.128616557),
			Point2f(0.618646920, -0.0855877250),
			Point2f(0.0122421598, 0.0230175443),
			Point2f(0.0122421598, 0.0230175443),
			Point2f(-0.188812047, 0.228197843),
			Point2f(0.00441747159, -0.297387213),
			Point2f(-0.520719767, 0.152393058),
			Point2f(0.392849416, 0.00738697406),
			Point2f(0.400074363, 0.0185570847),
			Point2f(-0.161484867, -0.192373112),
			Point2f(-0.554901838, 0.190730989),
			Point2f(-0.538667142, 0.185365483),
			Point2f(-0.0667442903, 0.0997460634),
			Point2f(0.399885803, 0.0410231315),
			Point2f(-0.159816831, 0.145826310),
			Point2f(-0.193316415, 0.161277503),
			Point2f(-0.0678345188, 0.287081748),
			Point2f(-0.383089483, -0.283330113),
			Point2f(-0.538667142, 0.185365483),
			Point2f(0.245664895, 0.162005231),
			Point2f(0.173092276, 0.191535592),
			Point2f(0.601281762, 0.120500855),
			Point2f(0.208548918, 0.185476139),
			Point2f(0.246893004, 0.220670119),
			Point2f(0.516039073, 0.178782418),
			Point2f(-0.254337519, 0.0937413648),
			Point2f(-0.254337519, 0.0937413648),
			Point2f(-0.0230990555, 0.314180285),
			Point2f(0.610029638, 0.227215171),
			Point2f(-0.254337519, 0.0937413648),
			Point2f(0.0697976872, 0.343245506),
			Point2f(0.538969517, -0.204621449),
			Point2f(0.00916308723, 0.359826297),
			Point2f(0.410353780, 0.316089481),
			Point2f(0.423950195, 0.324112266),
			Point2f(0.166566655, 0.145402640),
			Point2f(0.354594171, 0.350193948),
			Point2f(0.433712035, 0.356235564),
			Point2f(0.425307065, 0.364637494),
			Point2f(0.166924104, -0.152513608),
			Point2f(0.594130874, -0.268246830),
			Point2f(-0.0843627378, -0.0962528363),
			Point2f(0.108424753, -0.267108470),
			Point2f(0.00760878995, -0.304247797),
			Point2f(-0.471018314, -0.178305879),
			Point2f(-0.0817007348, -0.0933016762),
			Point2f(0.232274890, 0.154553935),
			Point2f(0.108424753, -0.267108470),
			Point2f(-0.525787771, -0.161353886),
			Point2f(-0.206048280, 0.241006181),
			Point2f(-0.178062543, -0.184703678),
			Point2f(0.105906568, 0.268231422),
			Point2f(-0.0817007348, -0.0933016762),
			Point2f(0.490914792, 0.276718110),
			Point2f(-0.176861435, -0.153617889),
			Point2f(0.0387795344, 0.0457828715),
			Point2f(0.456206828, -0.250739783),
			Point2f(0.0982551053, 0.104225174),
			Point2f(0.142445788, -0.118948005),
			Point2f(0.108424753, -0.267108470),
			Point2f(-0.0817007348, -0.0933016762),
			Point2f(-0.340707630, 0.00498990202),
			Point2f(0.0947291106, 0.0767719224),
			Point2f(0.169802040, 0.203134149),
			Point2f(0.577375948, -0.125099033),
			Point2f(0.318376005, -0.0486588739),
			Point2f(0.388697982, -0.0351444185),
			Point2f(0.406605273, -0.0364143848),
			Point2f(0.274859309, 0.0776181892),
			Point2f(0.349759877, -7.70174083e-05),
			Point2f(0.402967423, 0.00697830878),
			Point2f(0.105906568, 0.268231422),
			Point2f(0.338973522, 0.0359939188),
			Point2f(0.394951165, 0.0322254188),
			Point2f(-0.503028810, 0.203627899),
			Point2f(-0.0840740278, -0.234684706),
			Point2f(0.108424753, -0.267108470),
			Point2f(0.286642373, 0.103878126),
			Point2f(-0.0817007348, -0.0933016762),
			Point2f(0.332983583, -0.0356097035),
			Point2f(0.628004134, 0.0766527727),
			Point2f(-0.112659439, -0.196833044),
			Point2f(0.568797410, 0.136423931),
			Point2f(0.456206828, -0.250739783),
			Point2f(-0.254337519, 0.0937413648),
			Point2f(-0.206692874, -0.210832119),
			Point2f(0.550912619, 0.171586066),
			Point2f(0.581267595, 0.213235661),
			Point2f(0.334484309, 0.303876013),
			Point2f(-0.469516128, 0.0883551016),
			Point2f(0.133899942, 0.106862970),
			Point2f(-0.560961962, -0.114681393),
			Point2f(-0.0840740278, -0.234684706),
			Point2f(0.459386230, -0.236088052),
			Point2f(0.594130874, -0.268246830),
			Point2f(-0.124856450, 0.193096936),
			Point2f(-0.469516128, 0.0883551016),
			Point2f(0.514290810, -0.193822652),
			Point2f(0.158255994, 0.233290926),
			Point2f(0.317973822, -0.0477817170),
			Point2f(-0.0817007348, -0.0933016762),
			Point2f(-0.0702776462, -0.0671426803),
			Point2f(0.440836668, -0.100193374),
			Point2f(0.326240778, 0.0523138903),
			Point2f(-0.279556662, -0.283929169),
			Point2f(-0.485202312, -0.135626689),
			Point2f(-0.467358112, 0.246376559),
			Point2f(0.232274890, 0.154553935),
			Point2f(0.258349210, -0.269529581),
			Point2f(0.600620329, 0.126268178),
			Point2f(-0.0985416993, 0.245674044),
			Point2f(-0.279264033, -0.0990248993),
			Point2f(0.108424753, -0.267108470),
			Point2f(0.259638488, -0.100053802),
			Point2f(0.605106652, 0.223564968),
			Point2f(0.129683495, -0.100376993),
			Point2f(-0.0953388065, 0.112722203),
			Point2f(-0.440420747, -0.0396305211),
			Point2f(-0.0181254297, 0.0439292751),
			Point2f(-0.0878356919, 0.0847257674),
			Point2f(-0.271582603, 0.126064256),
			Point2f(-0.183777973, -0.124357253),
			Point2f(0.431088895, 0.0680654719),
			Point2f(-0.469516128, 0.0883551016),
			Point2f(-0.445174575, 0.133306518),
			Point2f(-0.0878356919, 0.0847257674),
			Point2f(-0.279039949, 0.0810008645),
			Point2f(0.612402737, -0.0826834291),
			Point2f(-0.454494953, 0.122878648),
			Point2f(0.244000912, -0.264438629),
			Point2f(0.142445788, -0.118948005),
			Point2f(0.129683495, -0.100376993),
			Point2f(-0.210078895, 0.131698489),
			Point2f(-0.277847171, 0.0665081516),
			Point2f(0.431088895, 0.0680654719),
			Point2f(0.252345473, 0.0688349009),
			Point2f(0.133899942, 0.106862970),
			Point2f(0.133899942, 0.106862970),
			Point2f(-0.486509413, -0.204596937),
			Point2f(-0.0940247625, 0.0698821172),
			Point2f(0.133899942, 0.106862970),
			Point2f(-0.440420747, -0.0396305211),
			Point2f(-0.0878356919, 0.0847257674),
			Point2f(-0.0954068601, -0.0968973264),
			Point2f(-0.277847171, 0.0665081516),
			Point2f(-0.277847171, 0.0665081516),
			Point2f(0.266677618, 0.111257851),
			Point2f(0.292424291, -0.230888903),
			Point2f(-0.0954068601, -0.0968973264)
		};

		_validSolutions = { 0, 2 };

		_rotations = {};

		_normals = {};

		for (int i = 0; i < rotationsVector.size(); i++) {
			Mat tempRotMat = Mat(Matx33d(
				rotationsVector.at(i).at(0),
				rotationsVector.at(i).at(1), 
				rotationsVector.at(i).at(2), 
				rotationsVector.at(i).at(3), 
				rotationsVector.at(i).at(4), 
				rotationsVector.at(i).at(5), 
				rotationsVector.at(i).at(6), 
				rotationsVector.at(i).at(7), 
				rotationsVector.at(i).at(8)
			));

			Mat tempNormMat = Mat(Matx31d(
				normalsVector.at(i).at(0),
				normalsVector.at(i).at(1),
				normalsVector.at(i).at(2)
			));

			_rotations.push_back(tempRotMat);
			_normals.push_back(tempNormMat);
		}

        _mask = Mat(maskVector);
    }

    bool isValidResult(vector<int> solutions)
    {
        //return (solutions == _validSolutions);
        
        bool valid = solutions.size() == _validSolutions.size();

        for (int i = 0; i < solutions.size() && valid; i++)
        {
            valid = solutions.at(i) == _validSolutions.at(i);
        }

        if (!valid)
        {
            cout << "solutions(" << solutions.size() << "):" << endl;
            copy(solutions.begin(), solutions.end(), std::ostream_iterator<int>(std::cout, " "));
            cout << endl << "validSolutions(" << _validSolutions.size() << "):" << endl;
            copy(_validSolutions.begin(), _validSolutions.end(), std::ostream_iterator<int>(std::cout, " "));
            cout << endl;
        }

        return valid;
        
    }

    vector<int> _validSolutions;
    vector<Point2f> _prevRectifiedPoints, _currRectifiedPoints;
    Mat _mask;
    vector<Mat> _rotations, _normals;
};

TEST(Calib3d_FilterDecomposeHomography, regression) { CV_FilterHomographyDecompTest test; test.safe_run(); }
